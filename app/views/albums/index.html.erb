<div class="max-w-4xl mx-auto p-6">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold">アルバム一覧</h1>
    <%= link_to "新規作成", new_album_path, class: "text-white px-4 py-2 rounded hover:opacity-80", style: "background-color: #ff8737;" %>
  </div>

  <% if @albums.present? %>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <% @albums.each do |album| %>
        
        <%# 非公開なら背景グレー %>
        <div class="rounded-lg shadow p-4 border relative flex flex-col <%= album.unpublish? ? 'bg-gray-100' : 'bg-white' %>">
          
          <%# 非公開の文字入れ %>
          <% if album.unpublish? %>
            <span class="absolute top-2 right-2 z-10 bg-gray-500 text-white text-xs px-2 py-1 rounded">非公開</span>
          <% end %>

          <div class="mb-4 h-40 w-full rounded overflow-hidden bg-gray-200">
            <% if album.photos.present? %>
              <%= image_tag album.photos.first.image, class: "w-full h-full object-cover" %>
            <% else %>
              <div class="flex items-center justify-center h-full text-gray-400 text-sm">
                No Image
              </div>
            <% end %>
          </div>

          <h2 class="text-xl font-bold mb-2 pr-8"><%= album.title %></h2>
          <p class="text-gray-600 text-sm mb-2"><%= album.created_at.strftime("%Y年%m月%d日") %></p>
          
          <p class="text-gray-800 text-sm mb-4 flex-grow"><%= truncate(album.description, length: 40) %></p>
          
          <%= link_to "詳細を見る", album_path(album), class: "text-indigo-600 hover:text-indigo-800 inline-block mt-auto" %>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-center text-gray-500 mt-10">まだアルバムがありません</p>
  <% end %>
</div>